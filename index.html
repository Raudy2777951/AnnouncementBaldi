<!DOCTYPE html>
<!-- Created with https://studio.penguinmod.com/PenguinMod-Packager/ -->
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- We only include this to explicitly loosen the CSP of various packager environments. It does not provide any security. -->
  <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: blob:">
  <title>Announcement Sender Discord</title>
  <style>
    body {
      color: #ffffff;
      font-family: sans-serif;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }
    :root, body.is-fullscreen {
      background-color: #000000;
    }
    [hidden] {
      display: none !important;
    }
    h1 {
      font-weight: normal;
    }
    a {
      color: inherit;
      text-decoration: underline;
      cursor: pointer;
    }

    #app, #loading, #error, #launch {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    .screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      cursor: default;
      user-select: none;
      -webkit-user-select: none;
      background-color: #000000;
    }
    #launch {
      background-color: rgba(0, 0, 0, 0.7);
      cursor: pointer;
    }
    .green-flag {
      width: 80px;
      height: 80px;
      padding: 16px;
      border-radius: 100%;
      background: rgba(255, 255, 255, 0.75);
      border: 3px solid hsla(0, 100%, 100%, 1);
      display: flex;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
    }
    #loading {
      
    }
    .progress-bar-outer {
      border: 1px solid currentColor;
      height: 10px;
      width: 200px;
      max-width: 200px;
    }
    .progress-bar-inner {
      height: 100%;
      width: 0;
      background-color: currentColor;
    }
    .loading-text, noscript {
      font-weight: normal;
      font-size: 36px;
      margin: 0 0 16px;
    }
    .loading-image {
      margin: 0 0 16px;
    }
    #error-message, #error-stack {
      font-family: monospace;
      max-width: 600px;
      white-space: pre-wrap;
      user-select: text;
      -webkit-user-select: text;
    }
    #error-stack {
      text-align: left;
      max-height: 200px;
      overflow: auto;
    }
    .control-button {
      width: 2rem;
      height: 2rem;
      padding: 0.375rem;
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
      user-select: none;
      -webkit-user-select: none;
      cursor: pointer;
      border: 0;
      border-radius: 4px;
    }
    .control-button:hover {
      background: #00c3ff26;
    }
    .control-button.active {
      background: #00c3ff59;
    }
    .fullscreen-button {
      background: white !important;
    }
    .standalone-fullscreen-button {
      position: absolute;
      top: 0;
      right: 0;
      background-color: rgba(0, 0, 0, 0.5);
      border-radius: 0 0 0 4px;
      padding: 4px;
      cursor: pointer;
    }
    .sc-canvas {
      cursor: auto;
    }
    .sc-monitor-root[data-opcode^="data_"] .sc-monitor-value-color {
      background-color: #ff8c1a;
    }
    .sc-monitor-row-value-outer {
      background-color: #fc662c;
    }
    .sc-monitor-row-value-editing .sc-monitor-row-value-outer {
      background-color: #e25b27;
    }
    
  </style>
  <meta name="theme-color" content="#000000">
  
</head>
<body>
  <div id="app"></div>

  <div id="launch" class="screen" hidden title="Click to start">
    <div class="green-flag">
      <svg viewBox="0 0 16.63 17.5" width="42" height="44">
        <defs><style>.cls-1,.cls-2{fill:#007AF4;stroke:#003080;stroke-linecap:round;stroke-linejoin:round;}.cls-2{stroke-width:1.5px;}</style></defs>
        <path class="cls-1" d="M.75,2A6.44,6.44,0,0,1,8.44,2h0a6.44,6.44,0,0,0,7.69,0V12.4a6.44,6.44,0,0,1-7.69,0h0a6.44,6.44,0,0,0-7.69,0"/>
        <line class="cls-2" x1="0.75" y1="16.75" x2="0.75" y2="0.75"/>
      </svg>
    </div>
  </div>

  <div id="loading" class="screen">
    <noscript>Enable JavaScript</noscript>
    <h1 class="loading-text">Loading</h1>
    
    <div class="progress-bar-outer"><div class="progress-bar-inner" id="loading-inner"></div></div>
  </div>

  <div id="error" class="screen" hidden>
    <h1>Error</h1>
    <details>
      <summary id="error-message"></summary>
      <p id="error-stack"></p>
    </details>
  </div>

  <script src="script.js"></script>
  <script>
    const appElement = document.getElementById('app');
    const launchScreen = document.getElementById('launch');
    const loadingScreen = document.getElementById('loading');
    const loadingInner = document.getElementById('loading-inner');
    const errorScreen = document.getElementById('error');
    const errorScreenMessage = document.getElementById('error-message');
    const errorScreenStack = document.getElementById('error-stack');

    const handleError = (error) => {
      console.error(error);
      if (!errorScreen.hidden) return;
      errorScreen.hidden = false;
      errorScreenMessage.textContent = '' + error;
      let debug = error && error.stack || 'no stack';
      debug += '\nUser agent: ' + navigator.userAgent;
      errorScreenStack.textContent = debug;
    };
    const setProgress = (progress) => {
      if (loadingInner) loadingInner.style.width = progress * 100 + '%';
    };
    const interpolate = (a, b, t) => a + t * (b - a);

    try {
      setProgress(0.1);

      const scaffolding = new Scaffolding.Scaffolding();
      scaffolding.width = 640;
      scaffolding.height = 360;
      scaffolding.resizeMode = "preserve-ratio";
      scaffolding.editableLists = false;
      scaffolding.usePackagedRuntime = true;
      scaffolding.setup();
      scaffolding.appendTo(appElement);

      const vm = scaffolding.vm;
      window.scaffolding = scaffolding;
      window.vm = scaffolding.vm;
      window.Scratch = {
        vm,
        renderer: vm.renderer,
        audioEngine: vm.runtime.audioEngine,
        bitmapAdapter: vm.runtime.v2BitmapAdapter,
        videoProvider: vm.runtime.ioDevices.video.provider
      };

      scaffolding.setUsername("player####".replace(/#/g, () => Math.floor(Math.random() * 10)));
      scaffolding.setAccentColor("#00c3ff");

      try {
        scaffolding.addCloudProvider(new Scaffolding.Cloud.WebSocketProvider(["wss://clouddata.turbowarp.org","wss://clouddata.turbowarp.xyz"], "p4-@AnnouncementSender.pmp"));
      } catch (error) {
        console.error(error);
      }

      vm.setTurboMode(false);
      if (vm.setInterpolation) vm.setInterpolation(false);
      if (vm.setFramerate) vm.setFramerate(30);
      if (vm.renderer.setUseHighQualityRender) vm.renderer.setUseHighQualityRender(false);
      if (vm.setRuntimeOptions) vm.setRuntimeOptions({
        fencing: true,
        miscLimits: true,
        maxClones: 300,
        dangerousOptimizations: false
      });
      if (vm.setCompilerOptions) vm.setCompilerOptions({
        enabled: true,
        warpTimer: false
      });
      if (vm.renderer.setMaxTextureDimension) vm.renderer.setMaxTextureDimension(2048);

      if (typeof ScaffoldingAddons !== 'undefined') {
        ScaffoldingAddons.run(scaffolding, {"gamepad":false,"pointerlock":false,"specialCloudBehaviors":false,"unsafeCloudBehaviors":false,"pause":false});
      }

      scaffolding.setExtensionSecurityManager({
        getSandboxMode: () => 'unsandboxed',
        canLoadExtensionFromProject: () => true
      });
      for (const extension of ["data:text/javascript;base64,Ly8gUGVuZ3VpbiBIb29rCi8vIEJ5IE11YmlMb3AgZnJvbSBSdWJ5IFRlYW0gKGh0dHBzOi8vcnVieXRlYW0udGVjaC8pCi8vIEkgZGlkbid0IHNlZSBhbnkgZXh0ZW5zaW9uIHdpdGggZW1iZWQgc3VwcG9ydCBzbyB5ZWFoIGkgbWFkZSBpdC4KCihmdW5jdGlvbiAoU2NyYXRjaCkgewoKICAgIGNsYXNzIE11Ymlsb3BQZW5ndWluSG9vayB7CiAgICAgIGVtYmVkUHJvcGVydGllcyA9IHt9OwogIAogICAgICBnZXRJbmZvKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogJ3Blbmd1aW5ob29rJywKICAgICAgICAgIG5hbWU6ICdQZW5ndWluSG9vaycsCiAgICAgICAgICBjb2xvcjE6ICIjMDJiNGUwIiwKICAgICAgICAgIGNvbG9yMjogIiMwMmI0ZTAiLAogICAgICAgICAgY29sb3IzOiAiIzAyYjRlMCIsCiAgICAgICAgICBibG9ja3M6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIG9wY29kZTogJ3NlbmRXZWJob29rJywKICAgICAgICAgICAgICB0ZXh0OiAnc2VuZCB3ZWJob29rIHdpdGggbmFtZSBbTkFNRV0gaWNvbiBbSU1BR0VVUkxdIG1lc3NhZ2UgW01FU1NBR0VdIHRvIHdlYmhvb2sgW1dFQkhPT0tdJywKICAgICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgICBOQU1FOiB7CiAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywKICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAndXNlcicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBJTUFHRVVSTDogewogICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsCiAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2UuanBnJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIE1FU1NBR0U6IHsKICAgICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLAogICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICdIZWxsbywgd29ybGQhJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFdFQkhPT0s6IHsKICAgICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLAogICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICdodHRwczovL3lvdXIud2ViaG9vay51cmwnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgb3Bjb2RlOiAnc2V0SGV4Q29sb3InLAogICAgICAgICAgICAgIHRleHQ6ICdzZXQgaGV4IGNvbG9yIHRvIFtDT0xPUl0nLAogICAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICAgIENPTE9SOiB7CiAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywKICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAnIzAwMDAwMCcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBvcGNvZGU6ICdzZXROYW1lJywKICAgICAgICAgICAgICB0ZXh0OiAnc2V0IG5hbWUgdG8gW05BTUVdJywKICAgICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgICBOQU1FOiB7CiAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywKICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAnUnVieSBVdGlscycKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBvcGNvZGU6ICdzZXRUaXRsZScsCiAgICAgICAgICAgICAgdGV4dDogJ3NldCBlbWJlZCB0aXRsZSB0byBbVElUTEVdJywKICAgICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgICBUSVRMRTogewogICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsCiAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ1RpdGxlJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIG9wY29kZTogJ3NldERlc2NyaXB0aW9uJywKICAgICAgICAgICAgICB0ZXh0OiAnc2V0IGVtYmVkIGRlc2NyaXB0aW9uIHRvIFtERVNDUklQVElPTl0nLAogICAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICAgIERFU0NSSVBUSU9OOiB7CiAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywKICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAnRGVzY3JpcHRpb24nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgb3Bjb2RlOiAnc2V0Rm9vdGVyJywKICAgICAgICAgICAgICB0ZXh0OiAnc2V0IGVtYmVkIGZvb3RlciB0byBbRk9PVEVSXScsCiAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgICAgRk9PVEVSOiB7CiAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywKICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAnRm9vdGVyJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIG9wY29kZTogJ3NlbmRXZWJob29rV2l0aEVtYmVkJywKICAgICAgICAgICAgICB0ZXh0OiAnc2VuZCB3ZWJob29rIHdpdGggZW1iZWRzIHRvIHdlYmhvb2sgW1dFQkhPT0tdJywKICAgICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgICBXRUJIT09LOiB7CiAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywKICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAnaHR0cHM6Ly95b3VyLndlYmhvb2sudXJsJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MQUJFTCwKICAgICAgICAgICAgICAgIHRleHQ6ICdDdXN0b21pemFibGUgU2VjdGlvbicKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgb3Bjb2RlOiAnc2VuZGpzb24nLAogICAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICAgICAgdGV4dDogJ3NlbmQgdXNpbmcganNvbiBbSlNPTl9EQVRBXSB3ZWJob29rIHVybDogW1dFQkhPT0tdJywKICAgICAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgICAgICBKU09OX0RBVEE6IHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAneyJjb250ZW50IjogIlNlbnQgd2l0aCBKU09OISEiLCJlbWJlZHMiOiBudWxsLCJhdHRhY2htZW50cyI6IFtdfScKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgV0VCSE9PSzogewogICAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICdodHRwczovL3lvdXIud2ViaG9vay51cmwnCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIF0KICAgICAgICB9OwogICAgICB9CiAgCiAgICAgIC8vIE5ldyBmdW5jdGlvbnMgZm9yIHNldHRpbmcgaW5kaXZpZHVhbCBlbWJlZCBwcm9wZXJ0aWVzCiAgICAgIHNldFRpdGxlKGFyZ3MpIHsKICAgICAgICB0aGlzLmVtYmVkUHJvcGVydGllcy50aXRsZSA9IGFyZ3MuVElUTEU7CiAgICAgIH0KICAKICAgICAgc2V0RGVzY3JpcHRpb24oYXJncykgewogICAgICAgIHRoaXMuZW1iZWRQcm9wZXJ0aWVzLmRlc2NyaXB0aW9uID0gYXJncy5ERVNDUklQVElPTjsKICAgICAgfQogIAogICAgICBzZXRGb290ZXIoYXJncykgewogICAgICAgIHRoaXMuZW1iZWRQcm9wZXJ0aWVzLmZvb3RlciA9IGFyZ3MuRk9PVEVSOwogICAgICB9CiAgCiAgICAgIHNldEhleENvbG9yKGFyZ3MpIHsKICAgICAgICB0aGlzLmVtYmVkUHJvcGVydGllcy5oZXhDb2xvciA9IGFyZ3MuQ09MT1I7CiAgICAgIH0KICAKICAgICAgc2V0TmFtZShhcmdzKSB7CiAgICAgICAgdGhpcy5lbWJlZFByb3BlcnRpZXMubmFtZSA9IGFyZ3MuTkFNRTsKICAgICAgfQogIAogICAgICBzZW5kV2ViaG9vayhhcmdzKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGFyZ3MuTkFNRTsKICAgICAgICBjb25zdCBpbWFnZVVybCA9IGFyZ3MuSU1BR0VVUkw7CiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGFyZ3MuTUVTU0FHRTsKICAgICAgICBjb25zdCB3ZWJob29rVXJsID0gYXJncy5XRUJIT09LOwogIAogICAgICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgICAgICB1c2VybmFtZTogbmFtZSwKICAgICAgICAgIGF2YXRhcl91cmw6IGltYWdlVXJsLAogICAgICAgICAgY29udGVudDogbWVzc2FnZQogICAgICAgIH07CiAgCiAgICAgICAgcmV0dXJuIGZldGNoKHdlYmhvb2tVcmwsIHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICB9LAogICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkKICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignV2ViaG9vayByZXF1ZXN0IGZhaWxlZDonLCByZXNwb25zZS5zdGF0dXNUZXh0KTsKICAgICAgICAgICAgcmV0dXJuICdXZWJob29rIHJlcXVlc3QgZmFpbGVkJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAnV2ViaG9vayBzZW50IHN1Y2Nlc3NmdWxseSc7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyB3ZWJob29rOicsIGVycm9yKTsKICAgICAgICAgIHJldHVybiAnRXJyb3Igc2VuZGluZyB3ZWJob29rJzsKICAgICAgICB9KTsKICAgICAgfQogIAogICAgICBzZW5kV2ViaG9va1dpdGhFbWJlZChhcmdzKSB7CiAgICAgICAgY29uc3QgZW1iZWQgPSB7fTsKICAgICAgICBjb25zdCBuYW1lID0ge307CiAgCiAgICAgICAgaWYgKHRoaXMuZW1iZWRQcm9wZXJ0aWVzLnRpdGxlKSB7CiAgICAgICAgICBlbWJlZC50aXRsZSA9IHRoaXMuZW1iZWRQcm9wZXJ0aWVzLnRpdGxlOwogICAgICAgIH0KICAKICAgICAgICBpZiAodGhpcy5lbWJlZFByb3BlcnRpZXMuZGVzY3JpcHRpb24pIHsKICAgICAgICAgIGVtYmVkLmRlc2NyaXB0aW9uID0gdGhpcy5lbWJlZFByb3BlcnRpZXMuZGVzY3JpcHRpb247CiAgICAgICAgfQogIAogICAgICAgIGlmICh0aGlzLmVtYmVkUHJvcGVydGllcy5mb290ZXIpIHsKICAgICAgICAgIGVtYmVkLmZvb3RlciA9IHsgdGV4dDogdGhpcy5lbWJlZFByb3BlcnRpZXMuZm9vdGVyIH07CiAgICAgICAgfQogIAogICAgICAgIGlmICh0aGlzLmVtYmVkUHJvcGVydGllcy5uYW1lKSB7CiAgICAgICAgICBuYW1lLm5hbWUgPSB0aGlzLmVtYmVkUHJvcGVydGllcy5uYW1lOwogICAgICAgIH0KICAKICAgICAgICBjb25zdCB3ZWJob29rVXJsID0gYXJncy5XRUJIT09LOwogICAgICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgICAgICBlbWJlZHM6IFtlbWJlZF0sCiAgICAgICAgICB1c2VybmFtZTogbmFtZS5uYW1lLAogICAgICAgIH07CiAgCiAgICAgICAgcmV0dXJuIGZldGNoKHdlYmhvb2tVcmwsIHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICB9LAogICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkKICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignV2ViaG9vayByZXF1ZXN0IHdpdGggZW1iZWRzIGZhaWxlZDonLCByZXNwb25zZS5zdGF0dXNUZXh0KTsKICAgICAgICAgICAgcmV0dXJuICdXZWJob29rIHJlcXVlc3Qgd2l0aCBlbWJlZHMgZmFpbGVkJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAnV2ViaG9vayB3aXRoIGVtYmVkcyBzZW50IHN1Y2Nlc3NmdWxseSc7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyB3ZWJob29rIHdpdGggZW1iZWRzOicsIGVycm9yKTsKICAgICAgICAgIHJldHVybiAnRXJyb3Igc2VuZGluZyB3ZWJob29rIHdpdGggZW1iZWRzJzsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgc2VuZF9qc29uX2Jsb2NrKGFyZ3MpewogICAgICAgIHRyeSB7cmV0dXJuIGZldGNoKGFyZ3MuV0VCSE9PSywgewogICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGJvZHk6IChhcmdzLkpTT05fREFUQSkKICAgICAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICBjYXRjaChlcnIpIHt9CiAgICAgIH0KICAgIH0KICAKICAgIFNjcmF0Y2guZXh0ZW5zaW9ucy5yZWdpc3RlcihuZXcgTXViaWxvcFBlbmd1aW5Ib29rKCkpOwp9KShTY3JhdGNoKTsK","data:text/javascript;base64,Ly8gICAgICAgICAgICAgICAgICAgICAgICAgICAjIyMoKCMjDQovLyAgICAgICAgICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIygoKA0KLy8gICAgICAgICAgICMjIyMjIyMjJkBAQEBAQEBAQEBAQEBAQEBAQCYmJiUjIyMjIygoKA0KLy8gICAgICAgIyMjIyMjJUBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQCYmJiUjIygoKCgNCi8vICAgICAjIyMjI0BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAmJiYmIygoKCgNCi8vICAgICMjIyNAQEBAQEBAQEBAJSVAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAmJiYjKCgoDQovLyAgICMjIyNAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQCYmJigoKCgNCi8vICAgIyMjJkBAQEBAQEBAJUBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAlJUBAQEBAJiYmIygoKA0KLy8gICAjIyMjQEBAQEBAQEBAQEBAQEBAQEAmJkBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQCYmJiYoKCgvDQovLyAgICAjIyMjI0BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAmJiYoKCgoLg0KLy8gICAgICAjIyMjIyZAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAJiYmJSgoKCgoDQovLyAgICAgICAgICMjI0BAQEBAQEBAQEBAQEBAQCUlQEBAQEAlJUBAQEAmJSZAQCYmJiYoKCgNCi8vICAgICAgICAgIyMjQEBAQEBAQEBAQEBAJiUmQEBAQCUmJUBAQCYmJUBAQEBAJiYmJigoKA0KLy8gICAgICAgICAjIyNAQEBAQEBAQEBAJSUmQEBAQCUlQEBAQCUlJkBAQCYmQEAmJiYmKCgoDQovLyAgICAgICAgICMjI0BAQEBAQEAmJiVAQEBAJSUmQEBAJiUlQEBAQCUmJkBAQCYmJiYoKCgNCi8vICAgICAgICAgIyMjQEBAQEBAQEBAQEBAJiVAQEBAJSUmQEBAJiUlQEBAQEBAJiYmJigoKA0KLy8gICAgICAgICAjIyNAQEBAQEBAQEAmJiZAQEAmJiZAQEBAJiZAQEBAJiZAQEAmJiYmKCgoDQovLyAgICAgICAgICMjI0BAQEBAQEAlJUBAQEAlJSZAQEAmJiVAQEBAJSUmQEBAQCYmJiYoKCgNCi8vICAgICAgICAgIyMjQEBAQEBAQEBAQCYlJkBAQEAlJSZAQEAmJiVAQEBAQEBAJiYmJigoKA0KLy8gICAgICAgICAjIyNAQEBAQEBAQCUlJkBAQCYlJUBAQEAlJSZAQEBAQEBAQEAmJiYmKCgoDQovLyAgICAgICAgICMjI0BAQEBAQCYlQEBAQCYlQEBAQEBAQEBAQEBAQEBAQEBAQCYmJiYoKCgNCi8vICAgICAgICAgIyMjJiZAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQCYmJiYmJigoKA0KLy8gICAgICAgICAoKCMjJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYoKCgoDQovLyAgICAgICAgICAoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKA0KLy8NCi8vICAgICAgICAgICAgICAgICAgICAgICAtPSBUb2FzdCBOb3RpZnMgPS0NCi8vICBEaWQgeW91IHdhbnQgYWxlcnRzPyBOb3RpZmljYXRpb25zcyB0aGF0IGFyZSBlYXNpbHkgY3VzdG9taXphYmxlPw0KLy8gICAgICAgIFRoaXMgaXMgdGhlIG9ubHkgYW5kIGJlc3Qgbm90aWZpY2F0aW9uIGV4dGVuc2lvbiENCi8vICAgICAgICAgICBDcmVhdGVkIGJ5IE11YmlMb3AgKyAyZGlnaXQgKGRpc2NvcmQgdXNlcikNCi8vICAgICAgICAgICAgIEZyb20gUnVieSBEZXZzIChodHRwczovL3J1Ynl0ZWFtLnRlY2gvKQ0KDQooZnVuY3Rpb24gKFNjcmF0Y2gpIHsNCiAgInVzZSBzdHJpY3QiOw0KICBjb25zdCBpY28gPQ0KICAgICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlWVlJHTFRnaVB6NEtQQ0ZFVDBOVVdWQkZJSE4yWnlCUVZVSk1TVU1nSWkwdkwxY3pReTh2UkZSRUlGTldSeUF4TGpFdkwwVk9JaUFpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2UjNKaGNHaHBZM012VTFaSEx6RXVNUzlFVkVRdmMzWm5NVEV1WkhSa0lqNEtQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhabGNuTnBiMjQ5SWpFdU1TSWdkMmxrZEdnOUlqVXhNbkI0SWlCb1pXbG5hSFE5SWpVeE1uQjRJaUJ6ZEhsc1pUMGljMmhoY0dVdGNtVnVaR1Z5YVc1bk9tZGxiMjFsZEhKcFkxQnlaV05wYzJsdmJqc2dkR1Y0ZEMxeVpXNWtaWEpwYm1jNloyVnZiV1YwY21salVISmxZMmx6YVc5dU95QnBiV0ZuWlMxeVpXNWtaWEpwYm1jNmIzQjBhVzFwZW1WUmRXRnNhWFI1T3lCbWFXeHNMWEoxYkdVNlpYWmxibTlrWkRzZ1kyeHBjQzF5ZFd4bE9tVjJaVzV2WkdRaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWo0S1BHYytQSEJoZEdnZ2MzUjViR1U5SW05d1lXTnBkSGs2TUM0NU9EY2lJR1pwYkd3OUlpTm1OemxsTmpBaUlHUTlJazBnTWpJNExqVXNMVEF1TlNCRElESXpNeTR4Tmpjc0xUQXVOU0F5TXpjdU9ETXpMQzB3TGpVZ01qUXlMalVzTFRBdU5VTWdNamt5TGpnek5Td3hMamd6TmpNNElETTBNQzQxTURFc01UUXVOalk1TnlBek9EVXVOU3d6T0VNZ05ERXpMall4TlN3MU15NHhNVFV5SURRek5TNDBORGtzTnpRdU5qRTFNaUEwTlRFc01UQXlMalZESURRMU5DNDVOVE1zTVRFd0xqQTJOaUEwTlRjdU5EVXpMREV4T0M0d05qWWdORFU0TGpVc01USTJMalZESURRME9DNHpPQ3d4TURFdU1UVTBJRFF6TVM0ek9DdzRNUzQyTlRReElEUXdOeTQxTERZNFF5QXpOamN1TlRZc05EVXVNall4TXlBek1qUXVOVFlzTXpJdU5UazBOeUF5TnpndU5Td3pNRU1nTWpZekxqWTJNU3d5T1M0eE56STBJREkwT0M0NU9UUXNNamt1TXpNNU1TQXlNelF1TlN3ek1DNDFReUF4T1RFdU5ETXNNekl1TWpRME55QXhOVEF1TnpZekxEUXpMakEzT0NBeE1USXVOU3cyTTBNZ09UUXVNamd5TERjekxqSXhNRGtnTnpndU5EUTROaXc0Tmk0ek56YzFJRFkxTERFd01pNDFReUEwTlM0eU5Ea3lMREV6TVM0MU9UVWdORFV1T1RFMU9Dd3hOakF1TWpZeUlEWTNMREU0T0M0MVF5QTNOUzQ0TVRNNExERTVPQzQzTXpZZ09EVXVORGd3TlN3eU1EZ3VNRFk1SURrMkxESXhOaTQxUXlBNU55NDROakExTERJeE9DNDRPRGdnT1RrdU1Ua3pPU3d5TWpFdU5UVTBJREV3TUN3eU1qUXVOVU1nTVRBd0xqVXNNamt6TGpRNU9TQXhNREF1TmpZM0xETTJNaTQwT1RrZ01UQXdMalVzTkRNeExqVkRJREV3TUM0d05qa3NORFF5TGpVM09DQXhNREF1TlRZNUxEUTFNeTQxTnpnZ01UQXlMRFEyTkM0MVF5QXhNRFV1TXpVMUxEUTNNUzQyT0RjZ01URXdMalV5TWl3ME56Y3VNREl4SURFeE55NDFMRFE0TUM0MVF5QTRPQzQyT1RZMExEUTNNeTR6TmpJZ056SXVOamsyTkN3ME5UVXVNREk1SURZNUxqVXNOREkxTGpWRElEWTVMalkyTmpjc016WXhMalE1T1NBMk9TNDFMREk1Tnk0ME9Ua2dOamtzTWpNekxqVkRJRFE1TGpJeU1ESXNNakUzTGpVNUlETTBMalUxTXpVc01UazNMamt5TXlBeU5Td3hOelF1TlVNZ01UUXVOREF6Tnl3eE16WXVPRGtnTWpJdU1EY3dOQ3d4TURNdU5UVTNJRFE0TERjMExqVkRJRGM0TGpjNE9UY3NORFF1TURFeE5TQXhNVFV1TWprc01qTXVNVGM0TVNBeE5UY3VOU3d4TWtNZ01UZ3dMamszTERVdU9EWTNORGdnTWpBMExqWXpOaXd4TGpjd01EZ3lJREl5T0M0MUxDMHdMalVnV2lJdlBqd3ZaejRLUEdjK1BIQmhkR2dnYzNSNWJHVTlJbTl3WVdOcGRIazZNU0lnWm1sc2JEMGlJMlEzTjJRME1TSWdaRDBpVFNBeU5ESXVOU3d0TUM0MUlFTWdNalUxTGpnek15d3RNQzQxSURJMk9TNHhOamNzTFRBdU5TQXlPREl1TlN3dE1DNDFReUF6TXpNdU9UazRMREl1T1RRek1UUWdNemd4TGprNU9Dd3hOeTQzTnpZMUlEUXlOaTQxTERRMFF5QTBOVEV1TWpVMkxEVTVMakE0T0RNZ05EY3dMakE1TERjNUxqVTRPRE1nTkRnekxERXdOUzQxUXlBME9UY3VOalkyTERFME5TNDFNREVnTkRrd0xqazVPU3d4T0RFdU5UQXhJRFEyTXl3eU1UTXVOVU1nTkRVMkxqTXdNeXd5TWpBdU5UTXlJRFEwT1M0ek1ETXNNakkzTGpFNU9DQTBORElzTWpNekxqVkRJRFEwTVM0NU56a3NNekV4TGpFNU15QTBOREV1TXpFekxETTRPQzQ0TmlBME5EQXNORFkyTGpWRElEUXpNeTQxTkRNc05Ea3dMalExT0NBME1UZ3VNemMyTERVd05TNDBOVGdnTXprMExqVXNOVEV4TGpWRElETXdNUzQ0TXpNc05URXhMalVnTWpBNUxqRTJOeXcxTVRFdU5TQXhNVFl1TlN3MU1URXVOVU1nT1RJdU5qSXpPU3cxTURVdU5EVTRJRGMzTGpRMU56SXNORGt3TGpRMU9DQTNNU3cwTmpZdU5VTWdOamt1TmpNNE5DdzBOVEl1T0RjMElEWTVMakV6T0RRc05ETTVMakl3T0NBMk9TNDFMRFF5TlM0MVF5QTNNaTQyT1RZMExEUTFOUzR3TWprZ09EZ3VOamsyTkN3ME56TXVNell5SURFeE55NDFMRFE0TUM0MVF5QXlNRGd1TVRNNUxEUTRNUzQyTlRrZ01qazRMamd3TlN3ME9ERXVPREkySURNNE9TNDFMRFE0TVVNZ05EQXhMalV4TWl3ME56Y3VOalV5SURRd09DNDJOemtzTkRZNUxqZ3hPU0EwTVRFc05EVTNMalZESURReE1TNHpNek1zTXpjNUxqVWdOREV4TGpZMk55d3pNREV1TlNBME1USXNNakl6TGpWRElEUXhNaTQzTWpVc01qSXhMakExTVNBME1UTXVOekkxTERJeE9DNDNNVGNnTkRFMUxESXhOaTQxUXlBME1qUXVNalkzTERJd09TNHlNellnTkRNeUxqa3pOQ3d5TURFdU1qTTJJRFEwTVN3eE9USXVOVU1nTkRVM0xqYzNNU3d4TnpNdU5ERTJJRFEyTXk0Mk1EVXNNVFV4TGpReE5pQTBOVGd1TlN3eE1qWXVOVU1nTkRVM0xqUTFNeXd4TVRndU1EWTJJRFExTkM0NU5UTXNNVEV3TGpBMk5pQTBOVEVzTVRBeUxqVkRJRFF6TlM0ME5Ea3NOelF1TmpFMU1pQTBNVE11TmpFMUxEVXpMakV4TlRJZ016ZzFMalVzTXpoRElETTBNQzQxTURFc01UUXVOalk1TnlBeU9USXVPRE0xTERFdU9ETTJNemdnTWpReUxqVXNMVEF1TlNCYUlpOCtQQzluUGdvOFp6NDhjR0YwYUNCemRIbHNaVDBpYjNCaFkybDBlVG94SWlCbWFXeHNQU0lqWm1Oa09HSXpJaUJrUFNKTklESXpOQzQxTERNd0xqVWdReUF5TkRndU9UazBMREk1TGpNek9URWdNall6TGpZMk1Td3lPUzR4TnpJMElESTNPQzQxTERNd1F5QXpNalF1TlRZc016SXVOVGswTnlBek5qY3VOVFlzTkRVdU1qWXhNeUEwTURjdU5TdzJPRU1nTkRNeExqTTRMRGd4TGpZMU5ERWdORFE0TGpNNExERXdNUzR4TlRRZ05EVTRMalVzTVRJMkxqVkRJRFEyTXk0Mk1EVXNNVFV4TGpReE5pQTBOVGN1TnpjeExERTNNeTQwTVRZZ05EUXhMREU1TWk0MVF5QTBNekl1T1RNMExESXdNUzR5TXpZZ05ESTBMakkyTnl3eU1Ea3VNak0ySURReE5Td3lNVFl1TlVNZ05ERXpMamN5TlN3eU1UZ3VOekUzSURReE1pNDNNalVzTWpJeExqQTFNU0EwTVRJc01qSXpMalZESURReE1TNDJOamNzTXpBeExqVWdOREV4TGpNek15d3pOemt1TlNBME1URXNORFUzTGpWRElEUXdPQzQyTnprc05EWTVMamd4T1NBME1ERXVOVEV5TERRM055NDJOVElnTXpnNUxqVXNORGd4UXlBeU9UZ3VPREExTERRNE1TNDRNallnTWpBNExqRXpPU3cwT0RFdU5qVTVJREV4Tnk0MUxEUTRNQzQxUXlBeE1UQXVOVEl5TERRM055NHdNakVnTVRBMUxqTTFOU3cwTnpFdU5qZzNJREV3TWl3ME5qUXVOVU1nTVRBd0xqVTJPU3cwTlRNdU5UYzRJREV3TUM0d05qa3NORFF5TGpVM09DQXhNREF1TlN3ME16RXVOVU1nTVRBMExqQTRMRFEwTVM0MU56Y2dNVEV4TGpBNExEUTBPQzR3TnpjZ01USXhMalVzTkRVeFF5QXlNREF1T0RNekxEUTFNUzQyTmpjZ01qZ3dMakUyTnl3ME5URXVOalkzSURNMU9TNDFMRFExTVVNZ016Y3dMak0yTERRME9DNHhOQ0F6TnpjdU1Ua3pMRFEwTVM0ek1EY2dNemd3TERRek1DNDFReUF6T0RBdU16TXpMRE0yTVM0NE16TWdNemd3TGpZMk55d3lPVE11TVRZM0lETTRNU3d5TWpRdU5VTWdNemcxTGpBek5Td3lNVFV1TnprMklETTVNUzR5TURFc01qQTRMamsyTXlBek9Ua3VOU3d5TURSRElEUTBNUzQzTWprc01UWXlMak14TXlBME5EQXVOekk1TERFeU1TNDJORFlnTXprMkxqVXNPREpESURNMk5pNDNNemNzTlRrdU5EVTROeUF6TXpNdU5EQXpMRFEwTGpRMU9EY2dNamsyTGpVc016ZERJREkzTmk0d05qRXNNekl1TlRNeUlESTFOUzR6T1RRc016QXVNelkxTkNBeU16UXVOU3d6TUM0MUlGb2lMejQ4TDJjK0NqeG5Qanh3WVhSb0lITjBlV3hsUFNKdmNHRmphWFI1T2pFaUlHWnBiR3c5SWlObVpXVTNZemNpSUdROUlrMGdNak0wTGpVc016QXVOU0JESURJMU5TNHpPVFFzTXpBdU16WTFOQ0F5TnpZdU1EWXhMRE15TGpVek1pQXlPVFl1TlN3ek4wTWdNek16TGpRd015dzBOQzQwTlRnM0lETTJOaTQzTXpjc05Ua3VORFU0TnlBek9UWXVOU3c0TWtNZ05EUXdMamN5T1N3eE1qRXVOalEySURRME1TNDNNamtzTVRZeUxqTXhNeUF6T1RrdU5Td3lNRFJESURNNU1TNHlNREVzTWpBNExqazJNeUF6T0RVdU1ETTFMREl4TlM0M09UWWdNemd4TERJeU5DNDFReUF6T0RBdU5qWTNMREk1TXk0eE5qY2dNemd3TGpNek15d3pOakV1T0RNeklETTRNQ3cwTXpBdU5VTWdNemMzTGpFNU15dzBOREV1TXpBM0lETTNNQzR6Tml3ME5EZ3VNVFFnTXpVNUxqVXNORFV4UXlBeU9EQXVNVFkzTERRMU1TNDJOamNnTWpBd0xqZ3pNeXcwTlRFdU5qWTNJREV5TVM0MUxEUTFNVU1nTVRFeExqQTRMRFEwT0M0d056Y2dNVEEwTGpBNExEUTBNUzQxTnpjZ01UQXdMalVzTkRNeExqVkRJREV3TUM0Mk5qY3NNell5TGpRNU9TQXhNREF1TlN3eU9UTXVORGs1SURFd01Dd3lNalF1TlVNZ09Ua3VNVGt6T1N3eU1qRXVOVFUwSURrM0xqZzJNRFVzTWpFNExqZzRPQ0E1Tml3eU1UWXVOVU1nT0RVdU5EZ3dOU3d5TURndU1EWTVJRGMxTGpneE16Z3NNVGs0TGpjek5pQTJOeXd4T0RndU5VTWdORFV1T1RFMU9Dd3hOakF1TWpZeUlEUTFMakkwT1RJc01UTXhMalU1TlNBMk5Td3hNREl1TlVNZ056Z3VORFE0Tml3NE5pNHpOemMxSURrMExqSTRNaXczTXk0eU1UQTVJREV4TWk0MUxEWXpReUF4TlRBdU56WXpMRFF6TGpBM09DQXhPVEV1TkRNc016SXVNalEwTnlBeU16UXVOU3d6TUM0MUlGb2lMejQ4TDJjK0NqeG5Qanh3WVhSb0lITjBlV3hsUFNKdmNHRmphWFI1T2pFaUlHWnBiR3c5SWlObU1tTXpPVGdpSUdROUlrMGdNVFV6TGpVc09UZ3VOU0JESURFMU9TNDFNak1zT1RjdU1UazJOaUF4TmpNdU1UZzVMRGs1TGpVeklERTJOQzQxTERFd05TNDFReUF4TmpJdU1Ea3hMREV4TWk0M01ESWdNVFUzTGpVNU1Td3hNVFF1TXpZNUlERTFNU3d4TVRBdU5VTWdNVFE0TGpVeU15d3hNRFV1TmpZNUlERTBPUzR6TlRZc01UQXhMalkyT1NBeE5UTXVOU3c1T0M0MUlGb2lMejQ4TDJjK0NqeG5Qanh3WVhSb0lITjBlV3hsUFNKdmNHRmphWFI1T2pFaUlHWnBiR3c5SWlObU1tTTBPVGdpSUdROUlrMGdNek13TGpVc01URXlMalVnUXlBek16Z3VNakF4TERFeE1pNHpOaklnTXpReExqTTJOeXd4TVRZdU1ESTVJRE0wTUN3eE1qTXVOVU1nTXpNMExqZ3pOeXd4TWprdU1EWXlJRE16TUM0eE56RXNNVEk0TGpjeU9TQXpNallzTVRJeUxqVkRJRE15TlM0ME16Z3NNVEU0TGpJek1pQXpNall1T1RNNExERXhOQzQ0T1RnZ016TXdMalVzTVRFeUxqVWdXaUl2UGp3dlp6NEtQR2MrUEhCaGRHZ2djM1I1YkdVOUltOXdZV05wZEhrNk1TSWdabWxzYkQwaUkyWXlZek01T0NJZ1pEMGlUU0F4TWpRdU5Td3hOREF1TlNCRElERXpNQzQxTWpNc01UTTVMakU1TnlBeE16UXVNVGc1TERFME1TNDFNeUF4TXpVdU5Td3hORGN1TlVNZ01UTXpMakE1TVN3eE5UUXVOekF5SURFeU9DNDFPVEVzTVRVMkxqTTJPU0F4TWpJc01UVXlMalZESURFeE9TNDFNak1zTVRRM0xqWTJPU0F4TWpBdU16VTJMREUwTXk0Mk5qa2dNVEkwTGpVc01UUXdMalVnV2lJdlBqd3ZaejRLUEdjK1BIQmhkR2dnYzNSNWJHVTlJbTl3WVdOcGRIazZNU0lnWm1sc2JEMGlJMll5WXpRNU9TSWdaRDBpVFNBek56UXVOU3d4TkRJdU5TQkRJRE00TkM0eE1Td3hOREl1T1RNMklETTROaTQzTnpZc01UUTNMalF6TmlBek9ESXVOU3d4TlRaRElETTNOQzQwTmpNc01UVTVMall3TVNBek56QXVNamsyTERFMU55NHhNREVnTXpjd0xERTBPQzQxUXlBek56RXVNek15TERFME5pNHpOQ0F6TnpJdU9ETXlMREUwTkM0ek5DQXpOelF1TlN3eE5ESXVOU0JhSWk4K1BDOW5QZ284Wno0OGNHRjBhQ0J6ZEhsc1pUMGliM0JoWTJsMGVUb3hJaUJtYVd4c1BTSWpaakpqTkRrNElpQmtQU0pOSURJd055NDFMREUyTVM0MUlFTWdNakUxTGpFMk1Td3hOakF1TmpZeklESXhPQzQyTmpFc01UWXpMams1TmlBeU1UZ3NNVGN4TGpWRElESXhOQzR5T1RVc01UYzFMams0TWlBeU1Ea3VPVFl5TERFM05pNDJORGtnTWpBMUxERTNNeTQxUXlBeU1ESXVOVEl6TERFMk9DNDJOamtnTWpBekxqTTFOaXd4TmpRdU5qWTVJREl3Tnk0MUxERTJNUzQxSUZvaUx6NDhMMmMrQ2p4blBqeHdZWFJvSUhOMGVXeGxQU0p2Y0dGamFYUjVPakVpSUdacGJHdzlJaU5tTW1Nek9UY2lJR1E5SWswZ016VXlMalVzTWpFNUxqVWdReUF6TmpFdU5qRXNNakU1TGpjM01pQXpOalF1TkRRekxESXlOQzR4TURVZ016WXhMREl6TWk0MVF5QXlPVFF1TVRZM0xESTVPUzR6TXpNZ01qSTNMak16TXl3ek5qWXVNVFkzSURFMk1DNDFMRFF6TTBNZ01UVXhMamczTml3ME16VXVOekV6SURFME9DNHdORE1zTkRNeUxqVTBOaUF4TkRrc05ESXpMalZESURJeE55NHdNelVzTXpVMUxqWXpNaUF5T0RRdU9EWTRMREk0Tnk0Mk16SWdNelV5TGpVc01qRTVMalVnV2lJdlBqd3ZaejRLUEdjK1BIQmhkR2dnYzNSNWJHVTlJbTl3WVdOcGRIazZNU0lnWm1sc2JEMGlJMll5WXpRNU9DSWdaRDBpVFNBeU9UWXVOU3d5TWpFdU5TQkRJRE13Tmk0d09UZ3NNakl5TGpNMk1pQXpNRGd1TlRrNExESXlOeTR3TWprZ016QTBMREl6TlM0MVF5QXlOVGN1TVRZM0xESTRNaTR6TXpNZ01qRXdMak16TXl3ek1qa3VNVFkzSURFMk15NDFMRE0zTmtNZ01UVTJMamcyTVN3ek9EQXVNVGMzSURFMU1pNDFNamNzTXpjNExqVXhNU0F4TlRBdU5Td3pOekZESURFMU1DNDFORElzTXpZNUxqQXpNeUF4TlRFdU1EUXlMRE0yTnk0eE9Ua2dNVFV5TERNMk5TNDFReUF5TURBdU1EWXlMRE14Tnk0eU56SWdNalE0TGpJeU9Dd3lOamt1TWpjeUlESTVOaTQxTERJeU1TNDFJRm9pTHo0OEwyYytDanhuUGp4d1lYUm9JSE4wZVd4bFBTSnZjR0ZqYVhSNU9qRWlJR1pwYkd3OUlpTm1NbU16T1RjaUlHUTlJazBnTWpNeExqVXNNakk1TGpVZ1F5QXlOREV1TWpRMUxESXlPQzQwTURVZ01qUTBMalF4TVN3eU16SXVOREExSURJME1Td3lOREV1TlVNZ01qRTNMakUyTnl3eU5qVXVNek16SURFNU15NHpNek1zTWpnNUxqRTJOeUF4TmprdU5Td3pNVE5ESURFMk1DNDRPVFFzTXpFMUxqY3pNaUF4TlRjdU1EWXhMRE14TWk0MU5qWWdNVFU0TERNd015NDFReUF4T0RJdU56QXlMREkzT0M0NU5qVWdNakEzTGpJd01pd3lOVFF1TWprNUlESXpNUzQxTERJeU9TNDFJRm9pTHo0OEwyYytDanhuUGp4d1lYUm9JSE4wZVd4bFBTSnZjR0ZqYVhSNU9qRWlJR1pwYkd3OUlpTm1NbU16T1RjaUlHUTlJazBnTXpRNUxqVXNNamMyTGpVZ1F5QXpOVGt1TVRRNExESTNOUzQwT0NBek5qSXVNekUxTERJM09TNDBPQ0F6TlRrc01qZzRMalZESURNeE1TNDFMRE16TmlBeU5qUXNNemd6TGpVZ01qRTJMalVzTkRNeFF5QXlNRGN1T1RJNExEUXpNeTQzTmprZ01qQTBMakE1TkN3ME16QXVOakF5SURJd05TdzBNakV1TlVNZ01qVXpMak0yT0N3ek56TXVNams1SURNd01TNDFNelVzTXpJMExqazJOU0F6TkRrdU5Td3lOell1TlNCYUlpOCtQQzluUGdvOFp6NDhjR0YwYUNCemRIbHNaVDBpYjNCaFkybDBlVG94SWlCbWFXeHNQU0lqWmpKak5EazRJaUJrUFNKTklETTBNeTQxTERNek9TNDFJRU1nTXpVekxqWXhOU3d6TkRBdU1URXhJRE0xTmk0eE1UVXNNelEwTGpjM09DQXpOVEVzTXpVekxqVkRJRE15Tnk0NE16TXNNemMyTGpZMk55QXpNRFF1TmpZM0xETTVPUzQ0TXpNZ01qZ3hMalVzTkRJelF5QXlOell1TnpRc05ESTJMamMzTnlBeU56SXVOVGN6TERReU5pNHlOemNnTWpZNUxEUXlNUzQxUXlBeU5qZ3VNakVzTkRFNExqTTJOaUF5TmpndU5UUXpMRFF4TlM0ek5qWWdNamN3TERReE1pNDFReUF5T1RRdU16azFMRE00Tnk0NU16Z2dNekU0TGpnNU5Td3pOak11TmpBMUlETTBNeTQxTERNek9TNDFJRm9pTHo0OEwyYytDand2YzNablBnbz0iOw0KDQogIGZ1bmN0aW9uIGRlZmF1bHRTdHlsZXMoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRvYXN0OiB7DQogICAgICAgIGJhY2tncm91bmRDb2xvdXI6IG51bGwsDQogICAgICAgIGZvbnRDb2xvdXI6IG51bGwsDQogICAgICAgIGZvbnRTaXplOiBudWxsLA0KICAgICAgICBib3JkZXJSYWRpdXM6IG51bGwsDQogICAgICAgIHBhZGRpbmc6IG51bGwsDQogICAgICAgIHNvdW5kTGluazogbnVsbCwNCiAgICAgIH0sDQogICAgICBub3RpZmljYXRpb246IHsNCiAgICAgICAgYmFja2dyb3VuZENvbG91cjogbnVsbCwNCiAgICAgICAgZm9udENvbG91cjogbnVsbCwNCiAgICAgICAgZm9udFNpemU6IG51bGwsDQogICAgICAgIGJvcmRlclJhZGl1czogbnVsbCwNCiAgICAgICAgcGFkZGluZzogbnVsbCwNCiAgICAgICAgc291bmRMaW5rOiBudWxsLA0KICAgICAgfSwNCiAgICAgIGFsZXJ0OiB7DQogICAgICAgIGJhY2tncm91bmRDb2xvdXI6IG51bGwsDQogICAgICAgIGZvbnRDb2xvdXI6IG51bGwsDQogICAgICAgIGZvbnRTaXplOiBudWxsLA0KICAgICAgICBib3JkZXJSYWRpdXM6IG51bGwsDQogICAgICAgIHBhZGRpbmc6IG51bGwsDQogICAgICAgIHNvdW5kTGluazogbnVsbCwNCiAgICAgIH0sDQogICAgfTsNCiAgfQ0KDQogIHZhciB0b2FzdENvbmZpZyA9IHsNCiAgICBzb3VuZFdoZW5BbGVydEVuYWJsZWQ6ICJ0cnVlIiwNCiAgfTsNCg0KICBjb25zdCBzdHlsZXNUb2FzdCA9IGRlZmF1bHRTdHlsZXMoKTsNCg0KICBmdW5jdGlvbiB2YWxpZENvbG91cihjb2xvdXIpIHsNCiAgICBpZiAodHlwZW9mIGNvbG91ciAhPSAic3RyaW5nIikgcmV0dXJuIGZhbHNlOw0KDQogICAgY29uc3QgaGV4UmVnZXggPSAvXiNbMC05QS1GXXs2fSQvaTsNCg0KICAgIHJldHVybiBoZXhSZWdleC50ZXN0KGNvbG91cik7DQogIH0NCg0KICBjbGFzcyBUb2FzdE5vdGlmc0V4dCB7DQogICAgZ2V0SW5mbygpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGlkOiAidG9hc3Rub3RpZnMiLA0KICAgICAgICBuYW1lOiAiVG9hc3QgTm90aWZzIiwNCiAgICAgICAgbWVudUljb25VUkk6IGljbywNCiAgICAgICAgYmxvY2tJY29uVVJJOiBpY28sDQogICAgICAgIGNvbG9yMTogIiM5MDVjMWIiLA0KICAgICAgICBibG9ja3M6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJzaG93VG9hc3QiLA0KICAgICAgICAgICAgdGV4dDogIlNob3cgVG9hc3Qgd2l0aCB0ZXh0IFtURVhUXSB3aXRoIGltYWdlIFtJTUFHRV0gaW1hZ2Ugcm91bmRlZD8gW1JPVU5ERURdIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBURVhUOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogIlRvYXN0ISIsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIElNQUdFOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogImh0dHBzOi8vcGVuZ3Vpbm1vZC5jb20vbmF2aWNvbi5wbmciLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBST1VOREVEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIG1lbnU6ICJ5ZXNvcm5vIiwNCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICJubyIsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAic2hvd05vdGlmaWNhdGlvblRvYXN0IiwNCiAgICAgICAgICAgIHRleHQ6ICJTaG93IE5vdGlmaWNhdGlvbiBUb2FzdCB3aXRoIHRleHQgW1RFWFRdIGF0IHBvc2l0aW9uIFtQT1NJVElPTl0gY3VzdG9tIGNzcz8gW1NUWUxFU10iLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFRFWFQ6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAiSGVsbG8sIFdvcmxkISIsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIFBPU0lUSU9OOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIG1lbnU6ICJwb3NpdGlvbiIsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAidXAiLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBUWVBFOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIG1lbnU6ICJ0eXBlIiwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgU1RZTEVTOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogIiIsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAic2hvd0FsZXJ0IiwNCiAgICAgICAgICAgIHRleHQ6ICJTaG93IEFsZXJ0IHdpdGggdGV4dCBbVEVYVF0gd2l0aCBkdXJhdGlvbiBvZiBbRFVSQVRJT05dIHNlY29uZHMiLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFRFWFQ6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAiSGVsbG8hIiwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgRFVSQVRJT046IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAiNSIsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiX19OT09QQ09ERSIsDQogICAgICAgICAgICB0ZXh0OiAiQ3VzdG9taXphdGlvbiIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxBQkVMLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAic2V0U3R5bGVPZlRvIiwNCiAgICAgICAgICAgIHRleHQ6ICJTZXQgW1NUWUxFXSBvZiBbQUxMVFlQRVNdIHRvIFtWQUxVRV0iLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFNUWUxFOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIG1lbnU6ICJzZXRTdHlsZSIsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIEFMTFRZUEVTOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIG1lbnU6ICJzZXRTdHlsZUFsbFR5cGVzIiwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgVkFMVUU6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAiIiwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJyZXNldFN0eWxlT2YiLA0KICAgICAgICAgICAgdGV4dDogIlJlc2V0IHN0eWxlIG9mIFtBTExUWVBFU10iLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIEFMTFRZUEVTOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIG1lbnU6ICJzZXRTdHlsZUFsbFR5cGVzIiwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJnZXRIZXhDb2xvdXIiLA0KICAgICAgICAgICAgdGV4dDogIkNvbG91ciBbSEVYXSIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIEhFWDogew0KICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkNPTE9SLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogIl9fTk9PUENPREUiLA0KICAgICAgICAgICAgdGV4dDogIkNvbmZpZ3VyYXRpb24gKENhbiBiZSBleHBlcmltZW50YWwpIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuTEFCRUwsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJzZXRDb25maWciLA0KICAgICAgICAgICAgdGV4dDogIlNldCBjb25maWcgW0NPTkZJR10gdG8gW1ZBTFVFXSIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgQ09ORklHOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogInNvdW5kV2hlbkFsZXJ0RW5hYmxlZCIsDQogICAgICAgICAgICAgICAgbWVudTogImNvbmZpZ3MiLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBWQUxVRTogew0KICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICJ0cnVlIiwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgXSwNCiAgICAgICAgbWVudXM6IHsNCiAgICAgICAgICBwb3NpdGlvbjogWyJ1cCIsICJtaWRkbGUiLCAiZG93biJdLA0KICAgICAgICAgIHR5cGU6IFsiaW5mbyIsICJzdWNjZXNzIiwgIndhcm5pbmciLCAiZXJyb3IiXSwNCiAgICAgICAgICB5ZXNvcm5vOiBbInllcyIsICJubyJdLA0KICAgICAgICAgIHNldFN0eWxlOiBbDQogICAgICAgICAgICB7IHRleHQ6ICJiYWNrZ3JvdW5kIGNvbG91ciIsIHZhbHVlOiAiYmFja2dyb3VuZENvbG91ciIgfSwNCiAgICAgICAgICAgIHsgdGV4dDogImZvbnQgY29sb3VyIiwgdmFsdWU6ICJmb250Q29sb3VyIiB9LA0KICAgICAgICAgICAgeyB0ZXh0OiAiZm9udCBzaXplIiwgdmFsdWU6ICJmb250U2l6ZSIgfSwNCiAgICAgICAgICAgIHsgdGV4dDogImJvcmRlciByb3VuZG5lc3MiLCB2YWx1ZTogImJvcmRlclJhZGl1cyIgfSwNCiAgICAgICAgICAgICJwYWRkaW5nIiwNCiAgICAgICAgICAgIHsgdGV4dDogInNvdW5kIHVybCIsIHZhbHVlOiAic291bmRMaW5rIiB9LA0KICAgICAgICAgIF0sDQogICAgICAgICAgc2V0U3R5bGVBbGxUeXBlczogWyJ0b2FzdCIsICJub3RpZmljYXRpb24iLCAiYWxlcnQiXSwNCiAgICAgICAgICBjb25maWdzOiBbDQogICAgICAgICAgICB7IHRleHQ6ICJwbGF5IHNvdW5kIHdoZW4gYWxlcnQiLCB2YWx1ZTogInNvdW5kV2hlbkFsZXJ0RW5hYmxlZCIgfSwNCiAgICAgICAgICBdLA0KICAgICAgICB9LA0KICAgICAgfTsNCiAgICB9DQoNCiAgICBzaG93Tm90aWZpY2F0aW9uVG9hc3QoYXJncykgew0KICAgICAgdmFyIHRleHQgPSBhcmdzLlRFWFQ7DQogICAgICB2YXIgcG9zaXRpb24gPSBhcmdzLlBPU0lUSU9OOw0KICAgICAgdmFyIHR5cGUgPSBhcmdzLlRZUEU7DQoNCiAgICAgIHZhciBzaXplID0gc3R5bGVzVG9hc3RbIm5vdGlmaWNhdGlvbiJdLmZvbnRTaXplID8/IDE2Ow0KICAgICAgdmFyIGJnQ29sb3VyID0NCiAgICAgICAgc3R5bGVzVG9hc3RbIm5vdGlmaWNhdGlvbiJdLmJhY2tncm91bmRDb2xvdXIgPz8gInJnYmEoMCwgMCwgMCwgMC44KSI7DQogICAgICB2YXIgYm9yZGVyUmFkaXVzID0gc3R5bGVzVG9hc3RbIm5vdGlmaWNhdGlvbiJdLmJvcmRlclJhZGl1cyA/PyA1Ow0KICAgICAgdmFyIHBhZGRpbmcgPSBzdHlsZXNUb2FzdFsibm90aWZpY2F0aW9uIl0ucGFkZGluZyA/PyAxMDsNCiAgICAgIHZhciBmb250Q29sb3VyID0gc3R5bGVzVG9hc3RbIm5vdGlmaWNhdGlvbiJdLmZvbnRDb2xvdXIgPz8gIiNGRkZGRkYiOw0KDQogICAgICB2YXIgc3R5bGVzID0gYXJncy5TVFlMRVM7DQoNCiAgICAgIHZhciBleGlzdGluZ1N0eWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm5vdGlmaWNhdGlvblRvYXN0U3R5bGUiKTsNCiAgICAgIGlmIChleGlzdGluZ1N0eWxlKSB7DQogICAgICAgIGV4aXN0aW5nU3R5bGUucmVtb3ZlKCk7DQogICAgICB9DQoNCiAgICAgIHZhciBub3RpZmljYXRpb25Ub2FzdFN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsNCiAgICAgIG5vdGlmaWNhdGlvblRvYXN0U3R5bGUuaWQgPSAibm90aWZpY2F0aW9uVG9hc3RTdHlsZSI7DQogICAgICBub3RpZmljYXRpb25Ub2FzdFN0eWxlLnRleHRDb250ZW50ID0gYA0KICAgICAgICAgICAgICAgICAgLm5vdGlmaWNhdGlvbi10b2FzdCB7DQogICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDk5OTk7DQogICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDEwcHg7DQogICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogJHtwYWRkaW5nfXB4ICR7cGFkZGluZyAqIDJ9cHg7DQogICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogJHtib3JkZXJSYWRpdXN9cHg7DQogICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogJHtzaXplfXB4Ow0KICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAke2ZvbnRDb2xvdXJ9Ow0KICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7YmdDb2xvdXJ9Ow0KICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogc2xpZGVJbiAwLjVzIGVhc2UtaW4tb3V0Ow0KICAgICAgICAgICAgICAgICAgICAgICR7c3R5bGVzfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgLm5vdGlmaWNhdGlvbi10b2FzdC51cCB7DQogICAgICAgICAgICAgICAgICAgICAgdG9wOiAxMHB4Ow0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgLm5vdGlmaWNhdGlvbi10b2FzdC5taWRkbGUgew0KICAgICAgICAgICAgICAgICAgICAgIHRvcDogNTAlOw0KICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIC5ub3RpZmljYXRpb24tdG9hc3QuZG93biB7DQogICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAxMHB4Ow0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgLm5vdGlmaWNhdGlvbi10b2FzdC5pbmZvIHsNCiAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzIxOTZGMzsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIC5ub3RpZmljYXRpb24tdG9hc3Quc3VjY2VzcyB7DQogICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM0Q0FGNTA7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAubm90aWZpY2F0aW9uLXRvYXN0Lndhcm5pbmcgew0KICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjRkZFQjNCOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgLm5vdGlmaWNhdGlvbi10b2FzdC5lcnJvciB7DQogICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNGNDQzMzY7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAubm90aWZpY2F0aW9uLXRvYXN0IC5saW5lIHsNCiAgICAgICAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAzcHggc29saWQ7DQogICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4Ow0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgLm5vdGlmaWNhdGlvbi10b2FzdCAuY2xvc2UtYnV0dG9uIHsNCiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICAgICAgICAgICAgdG9wOiA1cHg7DQogICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDVweDsNCiAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAubm90aWZpY2F0aW9uLXRvYXN0IC5jbG9zZS1idXR0b246aG92ZXIgew0KICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgQGtleWZyYW1lcyBzbGlkZUluIHsNCiAgICAgICAgICAgICAgICAgICAgICBmcm9tIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0zMDBweDsNCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgdG8gew0KICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogMTBweDsNCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICBAa2V5ZnJhbWVzIGZhZGVPdXQgew0KICAgICAgICAgICAgICAgICAgICAgIGZyb20gew0KICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB0byB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBgOw0KICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChub3RpZmljYXRpb25Ub2FzdFN0eWxlKTsNCg0KICAgICAgdmFyIG5vdGlmaWNhdGlvblRvYXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICBub3RpZmljYXRpb25Ub2FzdC5jbGFzc05hbWUgPSBgbm90aWZpY2F0aW9uLXRvYXN0ICR7cG9zaXRpb259ICR7dHlwZX1gOw0KICAgICAgbm90aWZpY2F0aW9uVG9hc3QuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPSJjbG9zZS1idXR0b24iPsOXPC9zcGFuPjxkaXYgY2xhc3M9ImxpbmUgJHt0eXBlfSI+PC9kaXY+JHt0ZXh0fWA7DQogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vdGlmaWNhdGlvblRvYXN0KTsNCg0KICAgICAgaWYgKHRvYXN0Q29uZmlnWyJzb3VuZFdoZW5BbGVydEVuYWJsZWQiXSA9PSAidHJ1ZSIpIHsNCiAgICAgICAgdmFyIGF1ZGlvTGluayA9DQogICAgICAgICAgc3R5bGVzVG9hc3RbIm5vdGlmaWNhdGlvbiJdLnNvdW5kTGluayA/Pw0KICAgICAgICAgICJodHRwczovL3J1YnktZGV2cy52ZXJjZWwuYXBwL2Nkbi9hcHBlYXIubXAzIjsNCiAgICAgICAgdmFyIGF1ZGlvID0gbmV3IEF1ZGlvKGF1ZGlvTGluayk7DQogICAgICAgIGF1ZGlvLnBsYXkoKTsNCiAgICAgIH0NCg0KICAgICAgdmFyIGNsb3NlQnV0dG9uID0gbm90aWZpY2F0aW9uVG9hc3QucXVlcnlTZWxlY3RvcigiLmNsb3NlLWJ1dHRvbiIpOw0KICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIG5vdGlmaWNhdGlvblRvYXN0LmNsYXNzTGlzdC5hZGQoImZhZGUtb3V0Iik7DQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgIG5vdGlmaWNhdGlvblRvYXN0LnJlbW92ZSgpOw0KICAgICAgICAgIG5vdGlmaWNhdGlvblRvYXN0U3R5bGUucmVtb3ZlKCk7DQogICAgICAgIH0sIDUwMCk7DQogICAgICB9KTsNCg0KICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgIG5vdGlmaWNhdGlvblRvYXN0LmNsYXNzTGlzdC5hZGQoImZhZGUtb3V0Iik7DQoNCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgbm90aWZpY2F0aW9uVG9hc3QucmVtb3ZlKCk7DQogICAgICAgICAgbm90aWZpY2F0aW9uVG9hc3RTdHlsZS5yZW1vdmUoKTsNCiAgICAgICAgfSwgNTAwKTsNCiAgICAgIH0sIDUwMDApOw0KICAgIH0NCg0KICAgIHNob3dUb2FzdChhcmdzKSB7DQogICAgICBsZXQgcm91bmQ7DQogICAgICB2YXIgdGV4dCA9IGFyZ3MuVEVYVDsNCiAgICAgIHZhciBpbWFnZSA9IGFyZ3MuSU1BR0U7DQogICAgICB2YXIgaXNSb3VuZGVkID0gYXJncy5ST1VOREVEOw0KICAgICAgdmFyIGV4aXN0aW5nU3R5bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidG9hc3RTdHlsZSIpOw0KDQogICAgICB2YXIgc2l6ZSA9IHN0eWxlc1RvYXN0WyJ0b2FzdCJdLmZvbnRTaXplID8/IDE4Ow0KICAgICAgdmFyIGJnQ29sb3VyID0gc3R5bGVzVG9hc3RbInRvYXN0Il0uYmFja2dyb3VuZENvbG91ciA/PyAiIzMzMyI7DQogICAgICB2YXIgYm9yZGVyUmFkaXVzID0gc3R5bGVzVG9hc3RbInRvYXN0Il0uYm9yZGVyUmFkaXVzID8/IDEwOw0KICAgICAgdmFyIHBhZGRpbmcgPSBzdHlsZXNUb2FzdFsidG9hc3QiXS5wYWRkaW5nID8/IDIwOw0KICAgICAgdmFyIGZvbnRDb2xvdXIgPSBzdHlsZXNUb2FzdFsidG9hc3QiXS5mb250Q29sb3VyID8/ICIjRkZGRkZGIjsNCg0KICAgICAgaWYgKGV4aXN0aW5nU3R5bGUpIHsNCiAgICAgICAgZXhpc3RpbmdTdHlsZS5yZW1vdmUoKTsNCiAgICAgIH0NCg0KICAgICAgaWYgKGlzUm91bmRlZCA9PT0gInllcyIpIHsNCiAgICAgICAgcm91bmQgPSAiYm9yZGVyLXJhZGl1czogNTAlOyI7DQogICAgICB9DQoNCiAgICAgIHZhciB0b2FzdFN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsNCiAgICAgIHRvYXN0U3R5bGUuaWQgPSAidG9hc3RTdHlsZSI7DQogICAgICB0b2FzdFN0eWxlLnRleHRDb250ZW50ID0gYA0KICAgICAgICAgICAgICAgICAgI3RvYXN0IHsNCiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICAgICAgICAgICAgei1pbmRleDogOTk5OTsNCiAgICAgICAgICAgICAgICAgICAgICB0b3A6IC0xMDBweDsNCiAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiA1MCU7DQogICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOw0KICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7YmdDb2xvdXJ9Ow0KICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAke2ZvbnRDb2xvdXJ9Ow0KICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICR7cGFkZGluZ31weDsNCiAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAke2JvcmRlclJhZGl1c31weDsNCiAgICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7DQogICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAke3NpemV9cHg7DQogICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHRvcCAwLjVzIGVhc2U7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAjdG9hc3QgaW1nIHsNCiAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNjRweDsNCiAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDY0cHg7DQogICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KICAgICAgICAgICAgICAgICAgICAgICR7cm91bmR9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAjdG9hc3QgLnBvaW50cyB7DQogICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGA7DQogICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRvYXN0U3R5bGUpOw0KDQogICAgICB2YXIgdG9hc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgIHRvYXN0LmlkID0gInRvYXN0IjsNCg0KICAgICAgaWYgKGltYWdlKSB7DQogICAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsNCiAgICAgICAgaW1nLnNyYyA9IGltYWdlOw0KICAgICAgICBpbWcud2lkdGggPSA2NDsNCiAgICAgICAgaW1nLmhlaWdodCA9IDY0Ow0KICAgICAgICB0b2FzdC5hcHBlbmRDaGlsZChpbWcpOw0KICAgICAgfQ0KDQogICAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOw0KICAgICAgY29udGVudC5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7DQogICAgICBjb250ZW50LnRleHRDb250ZW50ID0gdGV4dDsNCiAgICAgIHRvYXN0LmFwcGVuZENoaWxkKGNvbnRlbnQpOw0KDQogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvYXN0KTsNCg0KICAgICAgaWYgKHRvYXN0Q29uZmlnWyJzb3VuZFdoZW5BbGVydEVuYWJsZWQiXSA9PSAidHJ1ZSIpIHsNCiAgICAgICAgdmFyIGF1ZGlvTGluayA9DQogICAgICAgICAgc3R5bGVzVG9hc3RbInRvYXN0Il0uc291bmRMaW5rID8/DQogICAgICAgICAgImh0dHBzOi8vcnVieS1kZXZzLnZlcmNlbC5hcHAvY2RuL2FwcGVhci5tcDMiOw0KICAgICAgICB2YXIgYXVkaW8gPSBuZXcgQXVkaW8oYXVkaW9MaW5rKTsNCiAgICAgICAgYXVkaW8ucGxheSgpOw0KICAgICAgfQ0KDQogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdG9hc3Quc3R5bGUudG9wID0gIjAiOw0KICAgICAgfSwgMTAwKTsNCg0KICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgIHRvYXN0LnN0eWxlLnRvcCA9ICItMTAwcHgiOw0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB0b2FzdC5yZW1vdmUoKTsNCiAgICAgICAgICB0b2FzdFN0eWxlLnJlbW92ZSgpOw0KICAgICAgICB9LCA1MDApOw0KICAgICAgfSwgMjAwMCk7DQogICAgfQ0KDQogICAgc2hvd0FsZXJ0KGFyZ3MpIHsNCiAgICAgIHZhciB0ZXh0ID0gYXJncy5URVhUOw0KICAgICAgdmFyIHR5cGUgPSBhcmdzLlRZUEU7DQogICAgICB2YXIgZHVyYXRpb24gPSBhcmdzLkRVUkFUSU9OOyAvLyBOZXcgYXJndW1lbnQgZm9yIGR1cmF0aW9uDQoNCiAgICAgIHZhciBzaXplID0gc3R5bGVzVG9hc3RbImFsZXJ0Il0uZm9udFNpemUgPz8gMTY7DQogICAgICB2YXIgYmdDb2xvdXIgPSBzdHlsZXNUb2FzdFsiYWxlcnQiXS5iYWNrZ3JvdW5kQ29sb3VyID8/ICIjMjE5NkYzIjsNCiAgICAgIHZhciBib3JkZXJSYWRpdXMgPSBzdHlsZXNUb2FzdFsiYWxlcnQiXS5ib3JkZXJSYWRpdXMgPz8gNTsNCiAgICAgIHZhciBwYWRkaW5nID0gc3R5bGVzVG9hc3RbImFsZXJ0Il0ucGFkZGluZyA/PyAyMDsNCiAgICAgIHZhciBmb250Q29sb3VyID0gc3R5bGVzVG9hc3RbImFsZXJ0Il0uZm9udENvbG91ciA/PyAiI0ZGRkZGRiI7DQoNCiAgICAgIHZhciBhbGVydFN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsNCiAgICAgIGFsZXJ0U3R5bGUuaWQgPSAiYWxlcnRTdHlsZSI7DQogICAgICBhbGVydFN0eWxlLnRleHRDb250ZW50ID0gYA0KICAgICAgICAgICAgICAgICAgLmFsZXJ0IHsNCiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICAgICAgICAgICAgdG9wOiA1MCU7DQogICAgICAgICAgICAgICAgICAgICAgbGVmdDogNTAlOw0KICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOw0KICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICR7cGFkZGluZ31weDsNCiAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAke2JvcmRlclJhZGl1c31weDsNCiAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2JnQ29sb3VyfTsNCiAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJHtmb250Q29sb3VyfTsNCiAgICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7DQogICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAke3NpemV9cHg7DQogICAgICAgICAgICAgICAgICAgICAgei1pbmRleDogOTk5OTsNCiAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwOyAvKiBJbml0aWFsbHkgdHJhbnNwYXJlbnQgKi8NCiAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246IGZhZGVJbiAwLjVzIGVhc2UtaW4gZm9yd2FyZHM7IC8qIEZhZGUgaW4gYW5pbWF0aW9uICovDQogICAgICAgICAgICAgICAgICB9DQogIA0KICAgICAgICAgICAgICAgICAgQGtleWZyYW1lcyBmYWRlSW4gew0KICAgICAgICAgICAgICAgICAgICAgIGZyb20gew0KICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB0byB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgQGtleWZyYW1lcyBmYWRlT3V0IHsNCiAgICAgICAgICAgICAgICAgICAgICBmcm9tIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTsNCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgdG8gew0KICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgYDsNCiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYWxlcnRTdHlsZSk7DQoNCiAgICAgIHZhciBhbGVydCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgYWxlcnQuY2xhc3NOYW1lID0gYGFsZXJ0ICR7dHlwZX1gOw0KICAgICAgYWxlcnQudGV4dENvbnRlbnQgPSB0ZXh0Ow0KICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhbGVydCk7DQoNCiAgICAgIGlmICh0b2FzdENvbmZpZ1sic291bmRXaGVuQWxlcnRFbmFibGVkIl0gPT0gInRydWUiKSB7DQogICAgICAgIHZhciBhdWRpb0xpbmsgPQ0KICAgICAgICAgIHN0eWxlc1RvYXN0WyJhbGVydCJdLnNvdW5kTGluayA/Pw0KICAgICAgICAgICJodHRwczovL3J1YnktZGV2cy52ZXJjZWwuYXBwL2Nkbi9hcHBlYXIubXAzIjsNCiAgICAgICAgdmFyIGF1ZGlvID0gbmV3IEF1ZGlvKGF1ZGlvTGluayk7DQoNCiAgICAgICAgYXVkaW8ucGxheSgpOw0KICAgICAgfQ0KDQogICAgICAvLyBTY2hlZHVsZSByZW1vdmFsIG9mIHRoZSBhbGVydCBhZnRlciBkdXJhdGlvbg0KICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgIGFsZXJ0LnN0eWxlLmFuaW1hdGlvbiA9ICJmYWRlT3V0IDAuNXMgZWFzZS1vdXQgZm9yd2FyZHMiOyAvLyBBcHBseSBmYWRlLW91dCBhbmltYXRpb24NCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgYWxlcnQucmVtb3ZlKCk7DQogICAgICAgICAgYWxlcnRTdHlsZS5yZW1vdmUoKTsNCiAgICAgICAgfSwgNTAwKTsgLy8gV2FpdCBmb3IgZmFkZS1vdXQgYW5pbWF0aW9uIHRvIGNvbXBsZXRlIGJlZm9yZSByZW1vdmluZw0KICAgICAgfSwgZHVyYXRpb24gKiAxMDAwKTsgLy8gQ29udmVydCBkdXJhdGlvbiB0byBtaWxsaXNlY29uZHMNCiAgICB9DQoNCiAgICBzZXRTdHlsZU9mVG8oYXJncykgew0KICAgICAgY29uc3QgY2FzdCA9IFNjcmF0Y2guQ2FzdDsNCiAgICAgIGNvbnN0IHN0eWxlTnVtYmVycyA9IFsiZm9udFNpemUiLCAiYm9yZGVyUmFkaXVzIiwgInBhZGRpbmciXTsNCg0KICAgICAgdmFyIHN0eWxlID0gYXJncy5TVFlMRTsNCiAgICAgIHZhciBhbGx0eXBlcyA9IGFyZ3MuQUxMVFlQRVM7DQogICAgICB2YXIgdmFsdWUgPSBhcmdzLlZBTFVFOw0KDQogICAgICBpZiAodmFsdWUgPT0gIiIpIHsNCiAgICAgICAgdmFsdWUgPSBudWxsOw0KICAgICAgfQ0KDQogICAgICBpZiAoc3R5bGVOdW1iZXJzLmluY2x1ZGVzKHN0eWxlKSkgew0KICAgICAgICBzdHlsZXNUb2FzdFthbGx0eXBlc11bc3R5bGVdID0gY2FzdC50b051bWJlcih2YWx1ZSk7DQogICAgICB9IGVsc2UgaWYgKHN0eWxlID09ICJiYWNrZ3JvdW5kQ29sb3VyIiB8fCBzdHlsZSA9PSAiZm9udENvbG91ciIpIHsNCiAgICAgICAgc3R5bGVzVG9hc3RbYWxsdHlwZXNdW3N0eWxlXSA9IHZhbGlkQ29sb3VyKHZhbHVlKSA/IHZhbHVlIDogbnVsbDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHN0eWxlc1RvYXN0W2FsbHR5cGVzXVtzdHlsZV0gPSB2YWx1ZTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICByZXNldFN0eWxlT2YoYXJncykgew0KICAgICAgY29uc3QgYWxsdHlwZXMgPSBhcmdzLkFMTFRZUEVTOw0KICAgICAgc3R5bGVzVG9hc3RbYWxsdHlwZXNdID0gZGVmYXVsdFN0eWxlcygpW2FsbHR5cGVzXTsNCiAgICB9DQoNCiAgICBnZXRTdHlsZU9mKGFyZ3MpIHsNCiAgICAgIGNvbnN0IGFsbHR5cGVzID0gYXJncy5BTExUWVBFUzsNCiAgICAgIGNvbnN0IHN0eWxlID0gc3R5bGVzVG9hc3RbYWxsdHlwZXNdOw0KICAgICAgcmV0dXJuIHN0eWxlID09IG51bGwgPyAidW5kZWZpbmVkIiA6IHN0eWxlOw0KICAgIH0NCg0KICAgIGdldEhleENvbG91cihhcmdzKSB7DQogICAgICByZXR1cm4gYXJncy5IRVg7DQogICAgfQ0KDQogICAgc2V0Q29uZmlnKGFyZ3MpIHsNCiAgICAgIGNvbnN0IGNvbmZpZ25hbWUgPSBhcmdzLkNPTkZJRzsNCiAgICAgIHRvYXN0Q29uZmlnW2NvbmZpZ25hbWVdID0gYXJncy5WQUxVRTsNCiAgICB9DQogIH0NCg0KICBTY3JhdGNoLmV4dGVuc2lvbnMucmVnaXN0ZXIobmV3IFRvYXN0Tm90aWZzRXh0KCkpOw0KfSkoU2NyYXRjaCk7DQo="]) {
        vm.extensionManager.loadExtensionURL(extension);
      }

      vm.runtime.on('PROJECT_RUN_STOP', () => {
        if (!vm.isPaused || !vm.isPaused()) {
          window.close();
        }
      });
      vm.runtime.isProjectPermissionManagerDisabled = true;
      
    } catch (e) {
      handleError(e);
    }
  </script>
  
  
    <script>
      const getProjectData = (function() {
        const storage = scaffolding.storage;
        storage.onprogress = (total, loaded) => {
          setProgress(interpolate(0.2, 0.98, loaded / total));
        };
        
        storage.addWebStore(
          [
            storage.AssetType.ImageVector,
            storage.AssetType.ImageBitmap,
            storage.AssetType.Sound,
            storage.AssetType.Font
          ].filter(i => i),
          (asset) => new URL('./assets/' + asset.assetId + '.' + asset.dataFormat, location).href
        );
        return () => new Promise((resolve, reject) => {
        const xhr = new XMLHttpRequest();
        xhr.onload = () => {
          resolve(xhr.response);
        };
        xhr.onerror = () => {
          if (location.protocol === 'file:') {
            reject(new Error('Zip environment must be used from a website, not from a file URL.'));
          } else {
            reject(new Error('Request to load project data failed.'));
          }
        };
        xhr.onprogress = (e) => {
          if (e.lengthComputable) {
            setProgress(interpolate(0.1, 0.2, e.loaded / e.total));
          }
        };
        xhr.responseType = 'arraybuffer';
        xhr.open('GET', "./assets/project.json");
        xhr.send();
      });
      })();
    </script>
  <script>
    const run = async () => {
      const projectData = await getProjectData();
      await scaffolding.loadProject(projectData);
      setProgress(1);
      loadingScreen.hidden = true;
      if (true) {
        scaffolding.start();
      } else {
        launchScreen.hidden = false;
        launchScreen.addEventListener('click', () => {
          launchScreen.hidden = true;
          scaffolding.start();
        });
        launchScreen.focus();
      }
    };
    run().catch(handleError);
  </script>
</body>
</html>
